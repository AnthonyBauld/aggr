{
  "Ref": "1c0jr645yy53hvws3cowvnq0z",
  "FrontendAttrs": {
    "attest:provenance": "type=provenance,builder-id=https://github.com/AnthonyBauld/aggr/actions/runs/21671202679/attempts/1,mode=max",
    "filename": "Dockerfile",
    "vcs:localdir:context": "anthonybauld-aggr-trade",
    "vcs:localdir:dockerfile": "anthonybauld-aggr-trade",
    "vcs:revision": "ff4903d9a2db08a984ad440f810f8b4115e9c4c2",
    "vcs:source": "https://github.com/AnthonyBauld/aggr"
  },
  "Exporters": [
    {
      "Type": "image",
      "Attrs": {
        "name": "ghcr.io/anthonybauld/anthonybauld-aggr-trade:3.8.3,ghcr.io/anthonybauld/anthonybauld-aggr-trade:latest",
        "push": "true",
        "unpack": "false"
      }
    }
  ],
  "CreatedAt": {
    "seconds": 1770207623,
    "nanos": 851329226
  },
  "CompletedAt": {
    "seconds": 1770207718,
    "nanos": 239113683
  },
  "logs": {
    "media_type": "application/vnd.buildkit.status.v0",
    "digest": "sha256:a99b9c2b653672eb9350ab59ac32a07556a0e2888b6fa6c5752580a590af8679",
    "size": 53027
  },
  "ExporterResponse": {
    "containerimage.base.config": "{\"created\":\"2026-01-28T04:01:35.215233891Z\",\"architecture\":\"amd64\",\"os\":\"linux\",\"rootfs\":{\"type\":\"layers\",\"diff_ids\":[\"sha256:989e799e634906e94dc9a5ee2ee26fc92ad260522990f26e707861a5f52bf64e\",\"sha256:7949eaf2ba875705471733bef8c5b8e2f455fa5be8aa7d8becccf8e979d98303\",\"sha256:8b85bdc14a491b1186c56d4e4476502b443fa68ca249970b7dad6ec62a853400\",\"sha256:8d980f5e1638270c3d4e98a7f5cf9346010a31c97b21414497f3af34fb9e0f88\",\"sha256:bf504d3aa99712e275613a0c7195fb203095561dd18e7eb7480239ee6e023296\",\"sha256:4162669453fd96eeb1c8bd0fc52fc27ea9b97cf06e1c7748824024e992e8b01b\",\"sha256:da217c82a61765285388df02fd915c558dd8e97717536591103e8d33831d0c88\",\"sha256:6b82e5c280d0218b1ce9af97b4d577d2a1135d2937bf6a365318b54665764681\"]},\"history\":[{\"created\":\"2026-01-28T01:18:04.977843834Z\",\"created_by\":\"ADD alpine-minirootfs-3.23.3-x86_64.tar.gz / # buildkit\",\"comment\":\"buildkit.dockerfile.v0\"},{\"created\":\"2026-01-28T01:18:04.977843834Z\",\"created_by\":\"CMD [\\\"/bin/sh\\\"]\",\"comment\":\"buildkit.dockerfile.v0\",\"empty_layer\":true},{\"created\":\"2026-01-28T02:20:02.958850514Z\",\"created_by\":\"LABEL maintainer=NGINX Docker Maintainers \\u003cdocker-maint@nginx.com\\u003e\",\"comment\":\"buildkit.dockerfile.v0\",\"empty_layer\":true},{\"created\":\"2026-01-28T02:20:02.958850514Z\",\"created_by\":\"ENV NGINX_VERSION=1.28.1\",\"comment\":\"buildkit.dockerfile.v0\",\"empty_layer\":true},{\"created\":\"2026-01-28T02:20:02.958850514Z\",\"created_by\":\"ENV PKG_RELEASE=1\",\"comment\":\"buildkit.dockerfile.v0\",\"empty_layer\":true},{\"created\":\"2026-01-28T02:20:02.958850514Z\",\"created_by\":\"ENV DYNPKG_RELEASE=1\",\"comment\":\"buildkit.dockerfile.v0\",\"empty_layer\":true},{\"created\":\"2026-01-28T02:20:02.958850514Z\",\"created_by\":\"RUN /bin/sh -c set -x     \\u0026\\u0026 addgroup -g 101 -S nginx     \\u0026\\u0026 adduser -S -D -H -u 101 -h /var/cache/nginx -s /sbin/nologin -G nginx -g nginx nginx     \\u0026\\u0026 apkArch=\\\"$(cat /etc/apk/arch)\\\"     \\u0026\\u0026 nginxPackages=\\\"         nginx=${NGINX_VERSION}-r${PKG_RELEASE}     \\\"     \\u0026\\u0026 apk add --no-cache --virtual .checksum-deps         openssl     \\u0026\\u0026 case \\\"$apkArch\\\" in         x86_64|aarch64)             set -x             \\u0026\\u0026 KEY_SHA512=\\\"e09fa32f0a0eab2b879ccbbc4d0e4fb9751486eedda75e35fac65802cc9faa266425edf83e261137a2f4d16281ce2c1a5f4502930fe75154723da014214f0655\\\"             \\u0026\\u0026 wget -O /tmp/nginx_signing.rsa.pub https://nginx.org/keys/nginx_signing.rsa.pub             \\u0026\\u0026 if echo \\\"$KEY_SHA512 */tmp/nginx_signing.rsa.pub\\\" | sha512sum -c -; then                 echo \\\"key verification succeeded!\\\";                 mv /tmp/nginx_signing.rsa.pub /etc/apk/keys/;             else                 echo \\\"key verification failed!\\\";                 exit 1;             fi             \\u0026\\u0026 apk add -X \\\"https://nginx.org/packages/alpine/v$(egrep -o '^[0-9]+\\\\.[0-9]+' /etc/alpine-release)/main\\\" --no-cache $nginxPackages             ;;         *)             set -x             \\u0026\\u0026 tempDir=\\\"$(mktemp -d)\\\"             \\u0026\\u0026 chown nobody:nobody $tempDir             \\u0026\\u0026 apk add --no-cache --virtual .build-deps                 gcc                 libc-dev                 make                 openssl-dev                 pcre2-dev                 zlib-dev                 linux-headers                 bash                 alpine-sdk                 findutils                 curl             \\u0026\\u0026 su nobody -s /bin/sh -c \\\"                 export HOME=${tempDir}                 \\u0026\\u0026 cd ${tempDir}                 \\u0026\\u0026 curl -f -L -O https://github.com/nginx/pkg-oss/archive/${NGINX_VERSION}-${PKG_RELEASE}.tar.gz                 \\u0026\\u0026 PKGOSSCHECKSUM=\\\\\\\"4d43d5eadf39a2428e91a4e6fde0188f1cfb76354598d818d2ef2f8ff5cfa8d65993248b19a2d7ae663798d2362905e63ebd5dca6ca82cabc2831631d0e079ea *${NGINX_VERSION}-${PKG_RELEASE}.tar.gz\\\\\\\"                 \\u0026\\u0026 if [ \\\\\\\"\\\\$(openssl sha512 -r ${NGINX_VERSION}-${PKG_RELEASE}.tar.gz)\\\\\\\" = \\\\\\\"\\\\$PKGOSSCHECKSUM\\\\\\\" ]; then                     echo \\\\\\\"pkg-oss tarball checksum verification succeeded!\\\\\\\";                 else                     echo \\\\\\\"pkg-oss tarball checksum verification failed!\\\\\\\";                     exit 1;                 fi                 \\u0026\\u0026 tar xzvf ${NGINX_VERSION}-${PKG_RELEASE}.tar.gz                 \\u0026\\u0026 cd pkg-oss-${NGINX_VERSION}-${PKG_RELEASE}                 \\u0026\\u0026 cd alpine                 \\u0026\\u0026 make base                 \\u0026\\u0026 apk index --allow-untrusted -o ${tempDir}/packages/alpine/${apkArch}/APKINDEX.tar.gz ${tempDir}/packages/alpine/${apkArch}/*.apk                 \\u0026\\u0026 abuild-sign -k ${tempDir}/.abuild/abuild-key.rsa ${tempDir}/packages/alpine/${apkArch}/APKINDEX.tar.gz                 \\\"             \\u0026\\u0026 cp ${tempDir}/.abuild/abuild-key.rsa.pub /etc/apk/keys/             \\u0026\\u0026 apk del --no-network .build-deps             \\u0026\\u0026 apk add -X ${tempDir}/packages/alpine/ --no-cache $nginxPackages             ;;     esac     \\u0026\\u0026 apk del --no-network .checksum-deps     \\u0026\\u0026 if [ -n \\\"$tempDir\\\" ]; then rm -rf \\\"$tempDir\\\"; fi     \\u0026\\u0026 if [ -f \\\"/etc/apk/keys/abuild-key.rsa.pub\\\" ]; then rm -f /etc/apk/keys/abuild-key.rsa.pub; fi     \\u0026\\u0026 apk add --no-cache gettext-envsubst     \\u0026\\u0026 apk add --no-cache tzdata     \\u0026\\u0026 ln -sf /dev/stdout /var/log/nginx/access.log     \\u0026\\u0026 ln -sf /dev/stderr /var/log/nginx/error.log     \\u0026\\u0026 mkdir /docker-entrypoint.d # buildkit\",\"comment\":\"buildkit.dockerfile.v0\"},{\"created\":\"2026-01-28T02:20:03.007921786Z\",\"created_by\":\"COPY docker-entrypoint.sh / # buildkit\",\"comment\":\"buildkit.dockerfile.v0\"},{\"created\":\"2026-01-28T02:20:03.064678521Z\",\"created_by\":\"COPY 10-listen-on-ipv6-by-default.sh /docker-entrypoint.d # buildkit\",\"comment\":\"buildkit.dockerfile.v0\"},{\"created\":\"2026-01-28T02:20:03.119926947Z\",\"created_by\":\"COPY 15-local-resolvers.envsh /docker-entrypoint.d # buildkit\",\"comment\":\"buildkit.dockerfile.v0\"},{\"created\":\"2026-01-28T02:20:03.172967191Z\",\"created_by\":\"COPY 20-envsubst-on-templates.sh /docker-entrypoint.d # buildkit\",\"comment\":\"buildkit.dockerfile.v0\"},{\"created\":\"2026-01-28T02:20:03.220587252Z\",\"created_by\":\"COPY 30-tune-worker-processes.sh /docker-entrypoint.d # buildkit\",\"comment\":\"buildkit.dockerfile.v0\"},{\"created\":\"2026-01-28T02:20:03.220587252Z\",\"created_by\":\"ENTRYPOINT [\\\"/docker-entrypoint.sh\\\"]\",\"comment\":\"buildkit.dockerfile.v0\",\"empty_layer\":true},{\"created\":\"2026-01-28T02:20:03.220587252Z\",\"created_by\":\"EXPOSE map[80/tcp:{}]\",\"comment\":\"buildkit.dockerfile.v0\",\"empty_layer\":true},{\"created\":\"2026-01-28T02:20:03.220587252Z\",\"created_by\":\"STOPSIGNAL SIGQUIT\",\"comment\":\"buildkit.dockerfile.v0\",\"empty_layer\":true},{\"created\":\"2026-01-28T02:20:03.220587252Z\",\"created_by\":\"CMD [\\\"nginx\\\" \\\"-g\\\" \\\"daemon off;\\\"]\",\"comment\":\"buildkit.dockerfile.v0\",\"empty_layer\":true},{\"created\":\"2026-01-28T04:01:35.215233891Z\",\"created_by\":\"ENV NJS_VERSION=0.9.4\",\"comment\":\"buildkit.dockerfile.v0\",\"empty_layer\":true},{\"created\":\"2026-01-28T04:01:35.215233891Z\",\"created_by\":\"ENV NJS_RELEASE=1\",\"comment\":\"buildkit.dockerfile.v0\",\"empty_layer\":true},{\"created\":\"2026-01-28T04:01:35.215233891Z\",\"created_by\":\"ENV ACME_VERSION=0.3.1\",\"comment\":\"buildkit.dockerfile.v0\",\"empty_layer\":true},{\"created\":\"2026-01-28T04:01:35.215233891Z\",\"created_by\":\"RUN /bin/sh -c set -x     \\u0026\\u0026 apkArch=\\\"$(cat /etc/apk/arch)\\\"     \\u0026\\u0026 nginxPackages=\\\"         nginx=${NGINX_VERSION}-r${PKG_RELEASE}         nginx-module-xslt=${NGINX_VERSION}-r${DYNPKG_RELEASE}         nginx-module-geoip=${NGINX_VERSION}-r${DYNPKG_RELEASE}         nginx-module-image-filter=${NGINX_VERSION}-r${DYNPKG_RELEASE}         nginx-module-njs=${NGINX_VERSION}.${NJS_VERSION}-r${NJS_RELEASE}         nginx-module-acme=${NGINX_VERSION}.${ACME_VERSION}-r${PKG_RELEASE}     \\\"     \\u0026\\u0026 apk add --no-cache --virtual .checksum-deps         openssl     \\u0026\\u0026 case \\\"$apkArch\\\" in         x86_64|aarch64)             apk add -X \\\"https://nginx.org/packages/alpine/v$(egrep -o '^[0-9]+\\\\.[0-9]+' /etc/alpine-release)/main\\\" --no-cache $nginxPackages             ;;         *)             set -x             \\u0026\\u0026 tempDir=\\\"$(mktemp -d)\\\"             \\u0026\\u0026 chown nobody:nobody $tempDir             \\u0026\\u0026 apk add --no-cache --virtual .build-deps                 gcc                 libc-dev                 make                 openssl-dev                 pcre2-dev                 zlib-dev                 linux-headers                 libxslt-dev                 gd-dev                 geoip-dev                 libedit-dev                 bash                 alpine-sdk                 findutils                 curl                 cargo                 clang-libclang             \\u0026\\u0026 su nobody -s /bin/sh -c \\\"                 export HOME=${tempDir}                 \\u0026\\u0026 cd ${tempDir}                 \\u0026\\u0026 curl -f -L -O https://github.com/nginx/pkg-oss/archive/${NGINX_VERSION}-${PKG_RELEASE}.tar.gz                 \\u0026\\u0026 PKGOSSCHECKSUM=\\\\\\\"4d43d5eadf39a2428e91a4e6fde0188f1cfb76354598d818d2ef2f8ff5cfa8d65993248b19a2d7ae663798d2362905e63ebd5dca6ca82cabc2831631d0e079ea *${NGINX_VERSION}-${PKG_RELEASE}.tar.gz\\\\\\\"                 \\u0026\\u0026 if [ \\\\\\\"\\\\$(openssl sha512 -r ${NGINX_VERSION}-${PKG_RELEASE}.tar.gz)\\\\\\\" = \\\\\\\"\\\\$PKGOSSCHECKSUM\\\\\\\" ]; then                     echo \\\\\\\"pkg-oss tarball checksum verification succeeded!\\\\\\\";                 else                     echo \\\\\\\"pkg-oss tarball checksum verification failed!\\\\\\\";                     exit 1;                 fi                 \\u0026\\u0026 tar xzvf ${NGINX_VERSION}-${PKG_RELEASE}.tar.gz                 \\u0026\\u0026 cd pkg-oss-${NGINX_VERSION}-${PKG_RELEASE}                 \\u0026\\u0026 cd alpine                 \\u0026\\u0026 export BUILDTARGET=\\\\\\\"module-geoip module-image-filter module-njs module-xslt module-acme\\\\\\\"                 \\u0026\\u0026 if [ \\\\\\\"\\\\$(apk --print-arch)\\\\\\\" = \\\\\\\"armhf\\\\\\\" ]; then BUILDTARGET=\\\\\\\"\\\\$( echo \\\\$BUILDTARGET | sed 's,module-acme,,' )\\\\\\\"; fi                 \\u0026\\u0026 make \\\\$BUILDTARGET                 \\u0026\\u0026 apk index --allow-untrusted -o ${tempDir}/packages/alpine/${apkArch}/APKINDEX.tar.gz ${tempDir}/packages/alpine/${apkArch}/*.apk                 \\u0026\\u0026 abuild-sign -k ${tempDir}/.abuild/abuild-key.rsa ${tempDir}/packages/alpine/${apkArch}/APKINDEX.tar.gz                 \\\"             \\u0026\\u0026 cp ${tempDir}/.abuild/abuild-key.rsa.pub /etc/apk/keys/             \\u0026\\u0026 apk del --no-network .build-deps             \\u0026\\u0026 if [ \\\"$apkArch\\\" = \\\"armhf\\\" ]; then nginxPackages=\\\"$( echo $nginxPackages | sed 's,nginx-module-acme=.*,,')\\\"; fi             \\u0026\\u0026 apk add -X ${tempDir}/packages/alpine/ --no-cache $nginxPackages             ;;     esac     \\u0026\\u0026 apk del --no-network .checksum-deps     \\u0026\\u0026 if [ -n \\\"$tempDir\\\" ]; then rm -rf \\\"$tempDir\\\"; fi     \\u0026\\u0026 if [ -f \\\"/etc/apk/keys/abuild-key.rsa.pub\\\" ]; then rm -f /etc/apk/keys/abuild-key.rsa.pub; fi     \\u0026\\u0026 apk add --no-cache curl ca-certificates # buildkit\",\"comment\":\"buildkit.dockerfile.v0\"}],\"config\":{\"ExposedPorts\":{\"80/tcp\":{}},\"Env\":[\"PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\",\"NGINX_VERSION=1.28.1\",\"PKG_RELEASE=1\",\"DYNPKG_RELEASE=1\",\"NJS_VERSION=0.9.4\",\"NJS_RELEASE=1\",\"ACME_VERSION=0.3.1\"],\"Entrypoint\":[\"/docker-entrypoint.sh\"],\"Cmd\":[\"nginx\",\"-g\",\"daemon off;\"],\"WorkingDir\":\"/\",\"Labels\":{\"maintainer\":\"NGINX Docker Maintainers \\u003cdocker-maint@nginx.com\\u003e\"},\"StopSignal\":\"SIGQUIT\"}}",
    "containerimage.config": "{\"architecture\":\"amd64\",\"os\":\"linux\",\"rootfs\":{\"type\":\"layers\",\"diff_ids\":[\"sha256:989e799e634906e94dc9a5ee2ee26fc92ad260522990f26e707861a5f52bf64e\",\"sha256:7949eaf2ba875705471733bef8c5b8e2f455fa5be8aa7d8becccf8e979d98303\",\"sha256:8b85bdc14a491b1186c56d4e4476502b443fa68ca249970b7dad6ec62a853400\",\"sha256:8d980f5e1638270c3d4e98a7f5cf9346010a31c97b21414497f3af34fb9e0f88\",\"sha256:bf504d3aa99712e275613a0c7195fb203095561dd18e7eb7480239ee6e023296\",\"sha256:4162669453fd96eeb1c8bd0fc52fc27ea9b97cf06e1c7748824024e992e8b01b\",\"sha256:da217c82a61765285388df02fd915c558dd8e97717536591103e8d33831d0c88\",\"sha256:6b82e5c280d0218b1ce9af97b4d577d2a1135d2937bf6a365318b54665764681\"]},\"history\":[{\"created\":\"2026-01-28T01:18:04.977843834Z\",\"created_by\":\"ADD alpine-minirootfs-3.23.3-x86_64.tar.gz / # buildkit\",\"comment\":\"buildkit.dockerfile.v0\"},{\"created\":\"2026-01-28T01:18:04.977843834Z\",\"created_by\":\"CMD [\\\"/bin/sh\\\"]\",\"comment\":\"buildkit.dockerfile.v0\",\"empty_layer\":true},{\"created\":\"2026-01-28T02:20:02.958850514Z\",\"created_by\":\"LABEL maintainer=NGINX Docker Maintainers \\u003cdocker-maint@nginx.com\\u003e\",\"comment\":\"buildkit.dockerfile.v0\",\"empty_layer\":true},{\"created\":\"2026-01-28T02:20:02.958850514Z\",\"created_by\":\"ENV NGINX_VERSION=1.28.1\",\"comment\":\"buildkit.dockerfile.v0\",\"empty_layer\":true},{\"created\":\"2026-01-28T02:20:02.958850514Z\",\"created_by\":\"ENV PKG_RELEASE=1\",\"comment\":\"buildkit.dockerfile.v0\",\"empty_layer\":true},{\"created\":\"2026-01-28T02:20:02.958850514Z\",\"created_by\":\"ENV DYNPKG_RELEASE=1\",\"comment\":\"buildkit.dockerfile.v0\",\"empty_layer\":true},{\"created\":\"2026-01-28T02:20:02.958850514Z\",\"created_by\":\"RUN /bin/sh -c set -x     \\u0026\\u0026 addgroup -g 101 -S nginx     \\u0026\\u0026 adduser -S -D -H -u 101 -h /var/cache/nginx -s /sbin/nologin -G nginx -g nginx nginx     \\u0026\\u0026 apkArch=\\\"$(cat /etc/apk/arch)\\\"     \\u0026\\u0026 nginxPackages=\\\"         nginx=${NGINX_VERSION}-r${PKG_RELEASE}     \\\"     \\u0026\\u0026 apk add --no-cache --virtual .checksum-deps         openssl     \\u0026\\u0026 case \\\"$apkArch\\\" in         x86_64|aarch64)             set -x             \\u0026\\u0026 KEY_SHA512=\\\"e09fa32f0a0eab2b879ccbbc4d0e4fb9751486eedda75e35fac65802cc9faa266425edf83e261137a2f4d16281ce2c1a5f4502930fe75154723da014214f0655\\\"             \\u0026\\u0026 wget -O /tmp/nginx_signing.rsa.pub https://nginx.org/keys/nginx_signing.rsa.pub             \\u0026\\u0026 if echo \\\"$KEY_SHA512 */tmp/nginx_signing.rsa.pub\\\" | sha512sum -c -; then                 echo \\\"key verification succeeded!\\\";                 mv /tmp/nginx_signing.rsa.pub /etc/apk/keys/;             else                 echo \\\"key verification failed!\\\";                 exit 1;             fi             \\u0026\\u0026 apk add -X \\\"https://nginx.org/packages/alpine/v$(egrep -o '^[0-9]+\\\\.[0-9]+' /etc/alpine-release)/main\\\" --no-cache $nginxPackages             ;;         *)             set -x             \\u0026\\u0026 tempDir=\\\"$(mktemp -d)\\\"             \\u0026\\u0026 chown nobody:nobody $tempDir             \\u0026\\u0026 apk add --no-cache --virtual .build-deps                 gcc                 libc-dev                 make                 openssl-dev                 pcre2-dev                 zlib-dev                 linux-headers                 bash                 alpine-sdk                 findutils                 curl             \\u0026\\u0026 su nobody -s /bin/sh -c \\\"                 export HOME=${tempDir}                 \\u0026\\u0026 cd ${tempDir}                 \\u0026\\u0026 curl -f -L -O https://github.com/nginx/pkg-oss/archive/${NGINX_VERSION}-${PKG_RELEASE}.tar.gz                 \\u0026\\u0026 PKGOSSCHECKSUM=\\\\\\\"4d43d5eadf39a2428e91a4e6fde0188f1cfb76354598d818d2ef2f8ff5cfa8d65993248b19a2d7ae663798d2362905e63ebd5dca6ca82cabc2831631d0e079ea *${NGINX_VERSION}-${PKG_RELEASE}.tar.gz\\\\\\\"                 \\u0026\\u0026 if [ \\\\\\\"\\\\$(openssl sha512 -r ${NGINX_VERSION}-${PKG_RELEASE}.tar.gz)\\\\\\\" = \\\\\\\"\\\\$PKGOSSCHECKSUM\\\\\\\" ]; then                     echo \\\\\\\"pkg-oss tarball checksum verification succeeded!\\\\\\\";                 else                     echo \\\\\\\"pkg-oss tarball checksum verification failed!\\\\\\\";                     exit 1;                 fi                 \\u0026\\u0026 tar xzvf ${NGINX_VERSION}-${PKG_RELEASE}.tar.gz                 \\u0026\\u0026 cd pkg-oss-${NGINX_VERSION}-${PKG_RELEASE}                 \\u0026\\u0026 cd alpine                 \\u0026\\u0026 make base                 \\u0026\\u0026 apk index --allow-untrusted -o ${tempDir}/packages/alpine/${apkArch}/APKINDEX.tar.gz ${tempDir}/packages/alpine/${apkArch}/*.apk                 \\u0026\\u0026 abuild-sign -k ${tempDir}/.abuild/abuild-key.rsa ${tempDir}/packages/alpine/${apkArch}/APKINDEX.tar.gz                 \\\"             \\u0026\\u0026 cp ${tempDir}/.abuild/abuild-key.rsa.pub /etc/apk/keys/             \\u0026\\u0026 apk del --no-network .build-deps             \\u0026\\u0026 apk add -X ${tempDir}/packages/alpine/ --no-cache $nginxPackages             ;;     esac     \\u0026\\u0026 apk del --no-network .checksum-deps     \\u0026\\u0026 if [ -n \\\"$tempDir\\\" ]; then rm -rf \\\"$tempDir\\\"; fi     \\u0026\\u0026 if [ -f \\\"/etc/apk/keys/abuild-key.rsa.pub\\\" ]; then rm -f /etc/apk/keys/abuild-key.rsa.pub; fi     \\u0026\\u0026 apk add --no-cache gettext-envsubst     \\u0026\\u0026 apk add --no-cache tzdata     \\u0026\\u0026 ln -sf /dev/stdout /var/log/nginx/access.log     \\u0026\\u0026 ln -sf /dev/stderr /var/log/nginx/error.log     \\u0026\\u0026 mkdir /docker-entrypoint.d # buildkit\",\"comment\":\"buildkit.dockerfile.v0\"},{\"created\":\"2026-01-28T02:20:03.007921786Z\",\"created_by\":\"COPY docker-entrypoint.sh / # buildkit\",\"comment\":\"buildkit.dockerfile.v0\"},{\"created\":\"2026-01-28T02:20:03.064678521Z\",\"created_by\":\"COPY 10-listen-on-ipv6-by-default.sh /docker-entrypoint.d # buildkit\",\"comment\":\"buildkit.dockerfile.v0\"},{\"created\":\"2026-01-28T02:20:03.119926947Z\",\"created_by\":\"COPY 15-local-resolvers.envsh /docker-entrypoint.d # buildkit\",\"comment\":\"buildkit.dockerfile.v0\"},{\"created\":\"2026-01-28T02:20:03.172967191Z\",\"created_by\":\"COPY 20-envsubst-on-templates.sh /docker-entrypoint.d # buildkit\",\"comment\":\"buildkit.dockerfile.v0\"},{\"created\":\"2026-01-28T02:20:03.220587252Z\",\"created_by\":\"COPY 30-tune-worker-processes.sh /docker-entrypoint.d # buildkit\",\"comment\":\"buildkit.dockerfile.v0\"},{\"created\":\"2026-01-28T02:20:03.220587252Z\",\"created_by\":\"ENTRYPOINT [\\\"/docker-entrypoint.sh\\\"]\",\"comment\":\"buildkit.dockerfile.v0\",\"empty_layer\":true},{\"created\":\"2026-01-28T02:20:03.220587252Z\",\"created_by\":\"EXPOSE map[80/tcp:{}]\",\"comment\":\"buildkit.dockerfile.v0\",\"empty_layer\":true},{\"created\":\"2026-01-28T02:20:03.220587252Z\",\"created_by\":\"STOPSIGNAL SIGQUIT\",\"comment\":\"buildkit.dockerfile.v0\",\"empty_layer\":true},{\"created\":\"2026-01-28T02:20:03.220587252Z\",\"created_by\":\"CMD [\\\"nginx\\\" \\\"-g\\\" \\\"daemon off;\\\"]\",\"comment\":\"buildkit.dockerfile.v0\",\"empty_layer\":true},{\"created\":\"2026-01-28T04:01:35.215233891Z\",\"created_by\":\"ENV NJS_VERSION=0.9.4\",\"comment\":\"buildkit.dockerfile.v0\",\"empty_layer\":true},{\"created\":\"2026-01-28T04:01:35.215233891Z\",\"created_by\":\"ENV NJS_RELEASE=1\",\"comment\":\"buildkit.dockerfile.v0\",\"empty_layer\":true},{\"created\":\"2026-01-28T04:01:35.215233891Z\",\"created_by\":\"ENV ACME_VERSION=0.3.1\",\"comment\":\"buildkit.dockerfile.v0\",\"empty_layer\":true},{\"created\":\"2026-01-28T04:01:35.215233891Z\",\"created_by\":\"RUN /bin/sh -c set -x     \\u0026\\u0026 apkArch=\\\"$(cat /etc/apk/arch)\\\"     \\u0026\\u0026 nginxPackages=\\\"         nginx=${NGINX_VERSION}-r${PKG_RELEASE}         nginx-module-xslt=${NGINX_VERSION}-r${DYNPKG_RELEASE}         nginx-module-geoip=${NGINX_VERSION}-r${DYNPKG_RELEASE}         nginx-module-image-filter=${NGINX_VERSION}-r${DYNPKG_RELEASE}         nginx-module-njs=${NGINX_VERSION}.${NJS_VERSION}-r${NJS_RELEASE}         nginx-module-acme=${NGINX_VERSION}.${ACME_VERSION}-r${PKG_RELEASE}     \\\"     \\u0026\\u0026 apk add --no-cache --virtual .checksum-deps         openssl     \\u0026\\u0026 case \\\"$apkArch\\\" in         x86_64|aarch64)             apk add -X \\\"https://nginx.org/packages/alpine/v$(egrep -o '^[0-9]+\\\\.[0-9]+' /etc/alpine-release)/main\\\" --no-cache $nginxPackages             ;;         *)             set -x             \\u0026\\u0026 tempDir=\\\"$(mktemp -d)\\\"             \\u0026\\u0026 chown nobody:nobody $tempDir             \\u0026\\u0026 apk add --no-cache --virtual .build-deps                 gcc                 libc-dev                 make                 openssl-dev                 pcre2-dev                 zlib-dev                 linux-headers                 libxslt-dev                 gd-dev                 geoip-dev                 libedit-dev                 bash                 alpine-sdk                 findutils                 curl                 cargo                 clang-libclang             \\u0026\\u0026 su nobody -s /bin/sh -c \\\"                 export HOME=${tempDir}                 \\u0026\\u0026 cd ${tempDir}                 \\u0026\\u0026 curl -f -L -O https://github.com/nginx/pkg-oss/archive/${NGINX_VERSION}-${PKG_RELEASE}.tar.gz                 \\u0026\\u0026 PKGOSSCHECKSUM=\\\\\\\"4d43d5eadf39a2428e91a4e6fde0188f1cfb76354598d818d2ef2f8ff5cfa8d65993248b19a2d7ae663798d2362905e63ebd5dca6ca82cabc2831631d0e079ea *${NGINX_VERSION}-${PKG_RELEASE}.tar.gz\\\\\\\"                 \\u0026\\u0026 if [ \\\\\\\"\\\\$(openssl sha512 -r ${NGINX_VERSION}-${PKG_RELEASE}.tar.gz)\\\\\\\" = \\\\\\\"\\\\$PKGOSSCHECKSUM\\\\\\\" ]; then                     echo \\\\\\\"pkg-oss tarball checksum verification succeeded!\\\\\\\";                 else                     echo \\\\\\\"pkg-oss tarball checksum verification failed!\\\\\\\";                     exit 1;                 fi                 \\u0026\\u0026 tar xzvf ${NGINX_VERSION}-${PKG_RELEASE}.tar.gz                 \\u0026\\u0026 cd pkg-oss-${NGINX_VERSION}-${PKG_RELEASE}                 \\u0026\\u0026 cd alpine                 \\u0026\\u0026 export BUILDTARGET=\\\\\\\"module-geoip module-image-filter module-njs module-xslt module-acme\\\\\\\"                 \\u0026\\u0026 if [ \\\\\\\"\\\\$(apk --print-arch)\\\\\\\" = \\\\\\\"armhf\\\\\\\" ]; then BUILDTARGET=\\\\\\\"\\\\$( echo \\\\$BUILDTARGET | sed 's,module-acme,,' )\\\\\\\"; fi                 \\u0026\\u0026 make \\\\$BUILDTARGET                 \\u0026\\u0026 apk index --allow-untrusted -o ${tempDir}/packages/alpine/${apkArch}/APKINDEX.tar.gz ${tempDir}/packages/alpine/${apkArch}/*.apk                 \\u0026\\u0026 abuild-sign -k ${tempDir}/.abuild/abuild-key.rsa ${tempDir}/packages/alpine/${apkArch}/APKINDEX.tar.gz                 \\\"             \\u0026\\u0026 cp ${tempDir}/.abuild/abuild-key.rsa.pub /etc/apk/keys/             \\u0026\\u0026 apk del --no-network .build-deps             \\u0026\\u0026 if [ \\\"$apkArch\\\" = \\\"armhf\\\" ]; then nginxPackages=\\\"$( echo $nginxPackages | sed 's,nginx-module-acme=.*,,')\\\"; fi             \\u0026\\u0026 apk add -X ${tempDir}/packages/alpine/ --no-cache $nginxPackages             ;;     esac     \\u0026\\u0026 apk del --no-network .checksum-deps     \\u0026\\u0026 if [ -n \\\"$tempDir\\\" ]; then rm -rf \\\"$tempDir\\\"; fi     \\u0026\\u0026 if [ -f \\\"/etc/apk/keys/abuild-key.rsa.pub\\\" ]; then rm -f /etc/apk/keys/abuild-key.rsa.pub; fi     \\u0026\\u0026 apk add --no-cache curl ca-certificates # buildkit\",\"comment\":\"buildkit.dockerfile.v0\"},{\"created_by\":\"COPY /usr/src/app/dist /usr/share/nginx/html # buildkit\",\"comment\":\"buildkit.dockerfile.v0\"},{\"created_by\":\"COPY ./nginx.conf /etc/nginx/conf.d/default.conf # buildkit\",\"comment\":\"buildkit.dockerfile.v0\"},{\"created_by\":\"EXPOSE [80/tcp]\",\"comment\":\"buildkit.dockerfile.v0\",\"empty_layer\":true},{\"created_by\":\"CMD [\\\"nginx\\\" \\\"-g\\\" \\\"daemon off;\\\"]\",\"comment\":\"buildkit.dockerfile.v0\",\"empty_layer\":true}],\"config\":{\"ExposedPorts\":{\"80/tcp\":{}},\"Env\":[\"PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\",\"NGINX_VERSION=1.28.1\",\"PKG_RELEASE=1\",\"DYNPKG_RELEASE=1\",\"NJS_VERSION=0.9.4\",\"NJS_RELEASE=1\",\"ACME_VERSION=0.3.1\"],\"Entrypoint\":[\"/docker-entrypoint.sh\"],\"Cmd\":[\"nginx\",\"-g\",\"daemon off;\"],\"WorkingDir\":\"/\",\"Labels\":{\"maintainer\":\"NGINX Docker Maintainers \\u003cdocker-maint@nginx.com\\u003e\"},\"StopSignal\":\"SIGQUIT\",\"ArgsEscaped\":true}}",
    "refs.platforms": "{\"Platforms\":[{\"ID\":\"linux/amd64\",\"Platform\":{\"architecture\":\"amd64\",\"os\":\"linux\"}}]}",
    "verifier.requestopts": "{\"Platforms\":[\"linux/amd64\"],\"Labels\":{},\"Request\":\"\"}"
  },
  "Result": {
    "ResultDeprecated": {
      "media_type": "application/vnd.oci.image.index.v1+json",
      "digest": "sha256:c005848b9b2a230507892f3220bd0064016d47cb309137162d291cf607eb6232",
      "size": 856
    },
    "Attestations": [
      {
        "media_type": "application/vnd.in-toto+json",
        "digest": "sha256:280e3604d655bf97d8a44360f56ed005f59240a82d7c31fb4c07436e7ff3777d",
        "size": 106415,
        "annotations": {
          "in-toto.io/predicate-type": "https://slsa.dev/provenance/v0.2"
        }
      }
    ],
    "Results": {
      "0": {
        "media_type": "application/vnd.oci.image.index.v1+json",
        "digest": "sha256:c005848b9b2a230507892f3220bd0064016d47cb309137162d291cf607eb6232",
        "size": 856
      }
    }
  },
  "Generation": 1,
  "trace": {
    "media_type": "application/vnd.buildkit.otlp.json.v0",
    "digest": "sha256:5bfa63a00e2ca8af32cbbbb8dd0fa1058f2902305c13dda2653f55091dfb85a0",
    "size": 1013898
  },
  "numTotalSteps": 16,
  "numCompletedSteps": 16,
  "DefaultPlatform": "linux/amd64",
  "localState": {
    "Target": "default",
    "LocalPath": "/home/runner/work/aggr/aggr/anthonybauld-aggr-trade",
    "DockerfilePath": "/home/runner/work/aggr/aggr/anthonybauld-aggr-trade/Dockerfile"
  }
}